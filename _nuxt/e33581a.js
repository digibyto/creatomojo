(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{274:function(e,t,r){"use strict";var n=r(12);r(58),r(18),r(77);t.a={methods:{delay:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,r){try{setTimeout((function(){t()}),e)}catch(e){r(e.message)}})));case 1:case"end":return t.stop()}}),t)})))()}}}},275:function(e,t,r){var content=r(287);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(74).default)("27fbbd80",content,!1,{sourceMap:!1})},278:function(e,t,r){"use strict";r.r(t);r(44),r(35),r(43),r(18),r(75),r(34),r(76);var n=r(129);var o=r(174),c=r(103);function d(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||Object(o.a)(e)||Object(c.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=r(12),f=r(26),h=(r(58),r(59)),m=r(274);r(280),r(77),r(36),r(37),r(282),r(188);function v(){var e=["circle","15186CRzEHi","Group","Circle","recorder","getBlob","Sora","canvas","set","5611277QNvsdn","push","createMobileScreenObject","split","Rect","createObjectURL","8802cMzwdQ","editorHeight","4432iCOizJ","#ffffff","Text","439575ZalewA","rgba(255, 255, 255, 0.8)","trim","getContext","createDummyTextObjects","bind","12621900TITTcT","length","add","renderAll","video/mp4;codecs=vp9","#2c2f3b","pointer","3oqXuuu","38ugcOJS","editorCanvas","animate","forEach","4123212LqXXHz","log","4506324ZpqzSC"];return(v=function(){return e})()}function x(e,t){var r=v();return(x=function(e,t){return r[e-=229]})(e,t)}!function(e,t){for(var r=x,n=e();;)try{if(706161===parseInt(r(237))/1*(-parseInt(r(229))/2)+-parseInt(r(269))/3*(parseInt(r(235))/4)+-parseInt(r(256))/5+parseInt(r(233))/6+parseInt(r(245))/7+-parseInt(r(253))/8*(parseInt(r(251))/9)+parseInt(r(262))/10)break;n.push(n.shift())}catch(e){n.push(n.shift())}}(v);var O={methods:{createTextObject:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,d,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=x,t.prev=1,n=e.text,o=e.fontSize,c=e.fontWeight,d=e.color,t.abrupt("return",new fabric.IText(n,{fontSize:o,fontWeight:c,fontFamily:r(242),fill:d,lockRotation:!0,hoverCursor:r(268),moveCursor:"pointer",transparentCorners:!1,cornerColor:r(254),cornerStrokeColor:r(254),borderColor:r(254),cornerSize:8,padding:6,cornerStyle:r(236),borderDashArray:[5,5]}));case 6:throw t.prev=6,t.t0=t.catch(1),l=t.t0.message,Error(l);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})))()},createMobileScreenObject:function(){var e=x;try{var t=.8*this.editorHeight,r=360*t/640,n=new(fabric[e(238)])([new(fabric[e(249)])({top:0,left:0,height:t,width:r,fill:e(254),rx:18,ry:18}),new(fabric[e(249)])({top:24,left:12,height:t-36,width:r-24,fill:e(267),rx:12,ry:12})]),o=new(fabric[e(239)])({top:6,left:(r-6)/2,radius:6,fill:e(267)});return new fabric.Group([n,o])}catch(e){var c=e.message;throw Error(c)}},createDummyTextObjects:function(){var e=x;try{var t=.8*this.editorHeight-36,r=360*t/640-24,n=new(fabric[e(249)])({top:64,left:36,height:12,width:r-24,fill:e(257),rx:4,ry:4}),o=n.top,c=n.height;return{firstDummyTextObject:n,secondDummyTextObject:new fabric.Rect({top:o+c+4,left:36,height:12,width:(r-24)/2,fill:e(257),rx:4,ry:4}),thirdDummyTextObject:new(fabric[e(249)])(Object(f.a)({top:t-12,left:36,height:12,width:2*(r-24)/3,fill:"rgba(255, 255, 255, 0.8)",ry:4},"ry",4))}}catch(e){var d=e.message;throw Error(d)}},createMobileObject:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,d,l,f,h,m,v,O,w;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=x,t.prev=1,n=e.editorHeight,o=e.editorWidth,c=e[r(247)](),d=e[r(260)](),l=d.firstDummyTextObject,f=d.secondDummyTextObject,h=d.thirdDummyTextObject,m=new(fabric[r(238)])([c,l,f,h]),v=m.height,O=m.width,t.abrupt("return",(m.set({top:(n-v)/2,left:o-O-(n-v)/2,lockRotation:!0,hoverCursor:r(268),moveCursor:"pointer",transparentCorners:!1,cornerColor:r(254),cornerStrokeColor:r(254),borderColor:r(254),cornerSize:8,padding:6,cornerStyle:"circle",borderDashArray:[5,5]}),m));case 6:throw t.prev=6,t.t0=t.catch(1),w=t.t0.message,Error(w);case 10:case"end":return t.stop()}}),t,null,[[1,6]])})))()},createTextObjectForAnimation:function(e){return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,d,l,f,h,m,v,O,w,j,T,y,R,E,k,C,I,A;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(r=x,t.prev=1,n=e.top,o=e.left,c=e.scaleX,d=e.scaleY,l=e.text,f=e.fontSize,h=e.fontWeight,m=e.fill,v=String(l)[r(248)]("\n"),O=n,w=o,j=[],T=0;T<v[r(263)];T++)for(y=String(v[T])[r(258)](),R=String(y)[r(248)](" "),w=o,E=0;E<R.length;E++)k=R[E],C=new(fabric[r(255)])(k,{top:O,left:w,scaleX:c,scaleY:d,fontSize:f,fontWeight:h,fontFamily:r(242),fill:m}),j[r(246)](C),w+=(C.width+C.fontSize/3.6)*c,E===R[r(263)]-1&&(I=C.height,O+=I*d);return t.abrupt("return",{wordObjects:j});case 9:throw t.prev=9,t.t0=t.catch(1),A=t.t0.message,Error(A);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})))()},animateTextObject:function(e){var t=this;return Object(l.a)(regeneratorRuntime.mark((function r(){var n,o,c,d,l,f;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=x,r.prev=1,o=e.wordObjects,c=t.editorCanvas,d=0;case 4:if(!(d<o[n(263)])){r.next=12;break}return l=o[d],c[n(264)](l),r.next=9,t.delay(100);case 9:d++,r.next=4;break;case 12:return r.abrupt("return");case 15:throw r.prev=15,r.t0=r.catch(1),f=r.t0.message,Error(f);case 19:case"end":return r.stop()}}),r,null,[[1,15]])})))()},createMobileObjectForAnimation:function(e){var t=this;return Object(l.a)(regeneratorRuntime.mark((function r(){var n,o,c,d,l,f,h,m,v,O,w;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=x,r.prev=1,o=e.top,c=e.left,d=e.scaleX,l=e.scaleY,(f=t[n(247)]())[n(244)]({top:o,left:c,scaleX:d,scaleY:l}),h=t.createDummyTextObjects(),m=h.firstDummyTextObject,v=h.secondDummyTextObject,O=h.thirdDummyTextObject,r.abrupt("return",([m,v,O].forEach((function(e){e.set({top:o+e.top*l,left:c+36*d})})),{mobileScreenObject:f,firstDummyTextObject:m,secondDummyTextObject:v,thirdDummyTextObject:O}));case 8:throw r.prev=8,r.t0=r.catch(1),w=r.t0.message,Error(w);case 12:case"end":return r.stop()}}),r,null,[[1,8]])})))()},animateMobileObjects:function(e){var t=this;return Object(l.a)(regeneratorRuntime.mark((function r(){var n,o,c,d,l,f,h,m,v,O;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=x,r.prev=1,o=e.mobileScreenObject,c=e.firstDummyTextObject,d=e.secondDummyTextObject,l=e.thirdDummyTextObject,(f=t.editorCanvas)[n(264)](o),(h=[c,d,l])[n(232)]((function(e){e.set({scaleX:.9,scaleY:.9})})),m=0;case 7:if(!(m<h.length)){r.next=21;break}return(v=h[m])[n(231)]({scaleX:1,scaleY:1},{duration:400,onChange:t[n(230)][n(265)][n(261)](t.editorCanvas)}),f.add(v),t[n(230)][n(265)](),r.next=14,t.delay(300);case 14:if(r.t0=2===m,!r.t0){r.next=18;break}return r.next=18,t.delay(750);case 18:m++,r.next=7;break;case 21:return r.abrupt("return");case 24:throw r.prev=24,r.t1=r.catch(1),O=r.t1.message,Error(O);case 28:case"end":return r.stop()}}),r,null,[[1,24]])})))()},startRecording:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,d,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=x,t.prev=1,n=e,o=document.getElementById("editor"),c=o[r(259)]("2d"),d=new fabric.Rect({fill:"rgba(0, 0, 0, 0)",height:e[r(252)],width:e.editorWidth,opacity:0}),n[r(230)][r(264)](d),setInterval((function(){var e=r;d[e(231)]({opacity:!d.opacity},{duration:500,onChange:n[e(230)].renderAll[e(261)](n[e(230)])})}),525),e[r(240)]=RecordRTC(c,{type:r(243),mimeType:r(266),canvas:{height:e[r(252)],width:e.editorWidth},frameInterval:90,frameRate:90,bitsPerSecond:512e5,bitrate:512e5,disableLogs:!0}),e.recorder.startRecording(),t.next=11;break;case 6:throw t.prev=6,t.t0=t.catch(1),console[r(234)]("ERROR : ON START RECORDING"),l=t.t0.message,Error(l);case 11:case"end":return t.stop()}}),t,null,[[1,6]])})))()},stopRecording:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,(r=e).recorder.stopRecording(function(){var e=Object(l.a)(regeneratorRuntime.mark((function e(t){var n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=x,e.prev=1,o=r[n(240)][n(241)](),r.videoSource=URL[n(250)](o),e.next=11;break;case 6:throw e.prev=6,e.t0=e.catch(1),console[n(234)]("ERROR : ON STOP RECORDING"),c=e.t0.message,Error(c);case 11:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}()),t.next=9;break;case 5:throw t.prev=5,t.t0=t.catch(0),n=t.t0.message,Error(n);case 9:case"end":return t.stop()}}),t,null,[[0,5]])})))()}}};function w(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var j={data:function(){return{editorHeight:-1,editorWidth:-1,editorCanvas:{},templateObjectsMappedToTemplateIndexes:[[],[]],templateAnimationObjectsMappedToTemplateIndexes:[[],[]],recorder:{}}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?w(Object(source),!0).forEach((function(t){Object(f.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):w(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({videoSource:{get:function(){return this.$store.state.videoSource},set:function(e){this.$store.commit("updateVideoSource",e)}},triggerAction:{get:function(){return this.$store.state.triggerAction},set:function(e){this.$store.commit("updateTriggerAction",e)}}},Object(h.b)(["selectedTemplateIndex","templates"])),watch:{selectedTemplateIndex:function(){this.renderEditor()},triggerAction:function(){var e=this.triggerAction;"generateVideo"===e.type&&this.generateVideo()}},mixins:[m.a,O],methods:{updateEditorDimension:function(){var e=document.getElementById("editor-holder");this.editorHeight=e.offsetHeight,this.editorWidth=e.offsetWidth},setUpEditor:function(){this.editorCanvas=new fabric.Canvas("editor")},buildTemplateObjects:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,d,l,f,element,h,m,v,x,O,w,j;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.editorHeight,n=e.editorWidth,o=e.templates,c=[[],[]],d=0;case 3:if(!(d<o.length)){t.next=26;break}l=o[d].elements,f=0;case 6:if(!(f<l.length)){t.next=23;break}if(element=l[f],"text"!==element.type){t.next=17;break}return t.next=12,e.createTextObject(element);case 12:h=t.sent,0===d&&0===f?h.set({top:64,left:48}):0===d&&1===f?(m=h.height,h.set({top:.9*r-m-5,left:48})):1===d&&0===f?(v=h.height,x=h.width,h.set({top:(r-v)/2,left:(n-x)/2})):1===d&&1===f&&(O=h.height,w=h.width,j=c[1][0],h.set({top:j.top-O-8,left:(n-w)/2})),c[d][f]=h,t.next=20;break;case 17:return t.next=19,e.createMobileObject(element);case 19:c[d][f]=t.sent;case 20:f++,t.next=6;break;case 23:d++,t.next=3;break;case 26:return e.templateObjectsMappedToTemplateIndexes=c,t.abrupt("return");case 28:case"end":return t.stop()}}),t)})))()},renderEditor:function(){var e=this.selectedTemplateIndex,t=this.editorCanvas,r=this.templateObjectsMappedToTemplateIndexes[e],n=t.getObjects();n.length>0&&t.remove.apply(t,d(n)),t.add.apply(t,d(r)),t.renderAll()},buildTemplateObjectsForAnimation:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,d,l,f,h,m,v;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,r=e.templates,n=e.templateObjectsMappedToTemplateIndexes,o=[[],[]],c=0;case 4:if(!(c<n.length)){t.next=27;break}d=r[c].elements,l=n[c],f=0;case 8:if(!(f<l.length)){t.next=24;break}if(h=d[f].type,m=l[f],"text"!==h){t.next=17;break}return t.next=14,e.createTextObjectForAnimation(m);case 14:o[c][f]=t.sent,t.next=21;break;case 17:if("mobile"!==h){t.next=21;break}return t.next=20,e.createMobileObjectForAnimation(m);case 20:o[c][f]=t.sent;case 21:f++,t.next=8;break;case 24:c++,t.next=4;break;case 27:return e.templateAnimationObjectsMappedToTemplateIndexes=o,t.abrupt("return");case 31:throw t.prev=31,t.t0=t.catch(0),console.log("ERROR : BUILD TEMPLATE FOR ANIMATION"),v=t.t0.message,Error(v);case 36:case"end":return t.stop()}}),t,null,[[0,31]])})))()},animateFirstTemplate:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.templateAnimationObjectsMappedToTemplateIndexes,n=r[0],e.animateTextObject(n[0]),t.next=6,e.animateMobileObjects(n[2]);case 6:return t.next=8,e.delay(400);case 8:return t.next=10,e.animateTextObject(n[1]);case 10:return t.next=12,e.delay(1e3);case 12:t.next=19;break;case 14:throw t.prev=14,t.t0=t.catch(0),console.log("ERROR : ANIMATE FIRST TEMPLATE"),o=t.t0.message,Error(o);case 19:case"end":return t.stop()}}),t,null,[[0,14]])})))()},animateSecondTemplate:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.templateAnimationObjectsMappedToTemplateIndexes,n=r[1],t.next=5,e.animateTextObject(n[1]);case 5:return t.next=7,e.delay(400);case 7:return e.animateTextObject(n[0]),t.next=10,e.delay(750);case 10:t.next=17;break;case 12:throw t.prev=12,t.t0=t.catch(0),console.log("ERROR : ANIMATE SECOND TEMPLATE"),o=t.t0.message,Error(o);case 17:case"end":return t.stop()}}),t,null,[[0,12]])})))()},clearEditorButKeepTheBackground:function(){var e=this.editorCanvas,t=new fabric.Rect({top:-1,left:-1,height:this.editorHeight+2,width:this.editorWidth+2,fill:"#2c2e3b"}),r=e.getObjects();r.length>0&&e.remove.apply(e,d(r)),e.add(t)},generateVideo:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.clearEditorButKeepTheBackground(),t.next=4,e.buildTemplateObjectsForAnimation();case 4:return e.startRecording(),t.next=7,e.animateFirstTemplate();case 7:return e.clearEditorButKeepTheBackground(),t.next=10,e.animateSecondTemplate();case 10:e.stopRecording(),e.renderEditor(),e.triggerAction={type:"videoGenerated"},t.next=20;break;case 15:t.prev=15,t.t0=t.catch(0),r=t.t0.message,console.log("ERROR: GENERATE VIDEO"),console.log(r);case 20:case"end":return t.stop()}}),t,null,[[0,15]])})))()}},mounted:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.delay(0);case 2:return e.updateEditorDimension(),t.next=5,e.delay(0);case 5:return e.setUpEditor(),t.next=8,e.buildTemplateObjects();case 8:e.renderEditor();case 9:case"end":return t.stop()}}),t)})))()}},T=j,y=(r(286),r(42)),component=Object(y.a)(T,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"template-editor-container full-height full-width"},[r("div",{staticClass:"outline-holder full-height full-width position-relative"},[r("div",{staticClass:"border full-height full-width"},[r("div",{staticClass:"editor-holder",attrs:{id:"editor-holder"}},[r("canvas",{attrs:{id:"editor",height:e.editorHeight,width:e.editorWidth}})])]),e._v(" "),r("div",{staticClass:"dot position-absolute top-left"}),e._v(" "),r("div",{staticClass:"dot position-absolute top-right"}),e._v(" "),r("div",{staticClass:"dot position-absolute bottom-right"}),e._v(" "),r("div",{staticClass:"dot position-absolute bottom-left"})])])}),[],!1,null,"3de94960",null);t.default=component.exports},286:function(e,t,r){"use strict";r(275)},287:function(e,t,r){var n=r(73)(!1);n.push([e.i,".template-editor-container[data-v-3de94960]{padding:0 0 0 24px}.template-editor-container .outline-holder[data-v-3de94960]{padding:5px}.template-editor-container .outline-holder .border[data-v-3de94960]{border:2px dashed hsla(0,0%,100%,.35)}.template-editor-container .outline-holder .dot[data-v-3de94960]{height:12px;width:12px;background:#fff;border-radius:50%}.template-editor-container .editor-holder[data-v-3de94960]{margin:40px;height:calc(100% - 80px);width:calc(100% - 80px)}",""]),e.exports=n}}]);